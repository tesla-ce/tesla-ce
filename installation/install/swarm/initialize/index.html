<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<title>Initialize</title>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.92.2">
<meta name=description content="Initialize - TeSLA CE ">
<link rel=stylesheet href=https://tesla-ce.github.io/plugins/bootstrap/bootstrap.min.css>
<link rel=stylesheet href=https://tesla-ce.github.io/plugins/themify-icons/themify-icons.css>
<link rel=icon href=https://tesla-ce.github.io/images/favicon.png type=image/x-icon>
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel=stylesheet>
<style>:root{--primary-color:#3429a0;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#ae2bc5;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Lato}</style>
<link rel=stylesheet href=/css/cookie.css>
<link href=https://tesla-ce.github.io/css/style.min.css rel=stylesheet media=screen>
<script src=https://tesla-ce.github.io/plugins/jquery/jquery-1.12.4.js></script>
<script src=https://tesla-ce.github.io/plugins/jquery/jquery-ui.js></script>
<script src=https://tesla-ce.github.io/plugins/bootstrap/bootstrap.min.js></script>
<script src=https://tesla-ce.github.io/plugins/match-height/jquery.matchHeight-min.js></script>
<meta property="og:image" content="https://tesla-ce.github.io/images/Logo_TeSLA_v2.png">
<meta name=twitter:image content="https://tesla-ce.github.io/images/Logo_TeSLA_v2.png">
<meta name=twitter:card content="summary_large_image">
<meta property="og:image:width" content="842">
<meta property="og:image:height" content="425">
<meta property="og:image:type" content="image/png">
<meta name=twitter:title content="Initialize">
<meta name=twitter:description content="Double check that all required services are running and accessible before trying this step.
 Database The database must exist before trying to configure TeSLA CE. If root credentials are provided, this process will create the not privileged user, otherwise, the not privileged should have owner permissions in the TeSLA database.
Storage Buckets If you are using MinIO, the configuration process will create and initialize the buckets if they do not exist.">
<meta property="og:title" content="Initialize">
<meta property="og:description" content="Double check that all required services are running and accessible before trying this step.
 Database The database must exist before trying to configure TeSLA CE. If root credentials are provided, this process will create the not privileged user, otherwise, the not privileged should have owner permissions in the TeSLA database.
Storage Buckets If you are using MinIO, the configuration process will create and initialize the buckets if they do not exist.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://tesla-ce.github.io/installation/install/swarm/initialize/"><meta property="article:section" content="installation">
<meta property="article:modified_time" content="2021-06-14T20:37:27+02:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Initialize">
<meta name=twitter:description content="Double check that all required services are running and accessible before trying this step.
 Database The database must exist before trying to configure TeSLA CE. If root credentials are provided, this process will create the not privileged user, otherwise, the not privileged should have owner permissions in the TeSLA database.
Storage Buckets If you are using MinIO, the configuration process will create and initialize the buckets if they do not exist.">
</head>
<body>
<header class="shadow-bottom sticky-top bg-white">
<nav class="navbar navbar-expand-md navbar-light">
<div class=container>
<a class="navbar-brand px-2" href=/>
<img class=img-fluid src=https://tesla-ce.github.io/images/Logo_TeSLA_v2.png alt="TeSLA CE">
</a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse text-center" id=navigation>
<ul class="navbar-nav ml-auto">
<li class=nav-item>
<a class="nav-link text-dark" href=https://tesla-ce.github.io/>Home</a>
</li>
<li class=nav-item>
<a class="nav-link text-dark" href=https://tesla-ce.github.io/faq>Faq</a>
</li>
<li class=nav-item>
<a class="nav-link text-dark" href=https://tesla-ce.github.io/about>About</a>
</li>
<li class=nav-item>
<a class="nav-link text-dark" href=https://tesla-ce.github.io/contact>contact</a>
</li>
<li class="nav-item dropdown">
<a class="nav-link dropdown-toggle text-dark" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>
sections
</a>
<div class=dropdown-menu>
<a class=dropdown-item href=https://tesla-ce.github.io/features>Features</a>
<a class=dropdown-item href=https://tesla-ce.github.io/installation>Installation</a>
<a class=dropdown-item href=https://tesla-ce.github.io/developers>Developers</a>
</div>
</li>
</ul>
</div>
</div>
</nav>
</header>
<section class="single section-sm pb-0">
<div class=container>
<div class=row>
<div class=col-lg-3>
<div class=sidebar>
<a class=back-btn href=/ aria-label=back></a>
<ul class=list-styled>
<li data-nav-id=https://tesla-ce.github.io/installation/ title=Installation class=sidelist>
<a href=https://tesla-ce.github.io/installation/>
Installation
</a>
<ul>
<li data-nav-id=https://tesla-ce.github.io/installation/requirements/ title=Requirements class=sidelist>
<a href=https://tesla-ce.github.io/installation/requirements/>
Requirements
</a>
</li>
<li data-nav-id=https://tesla-ce.github.io/installation/install/ title=Installation class=sidelist>
<a href=https://tesla-ce.github.io/installation/install/>
Installation
</a>
<ul>
<li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/ title="Docker Swarm" class=sidelist>
<a href=https://tesla-ce.github.io/installation/install/swarm/>
Docker Swarm
</a>
<ul>
<li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/requirements/ title=Requirements class=sidelist>
<a href=https://tesla-ce.github.io/installation/install/swarm/requirements/>
Requirements
</a>
</li>
<li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/getting_started/ title="Getting Started" class=sidelist>
<a href=https://tesla-ce.github.io/installation/install/swarm/getting_started/>
Getting Started
</a>
</li>
<li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/configuration/ title=Configuration class=sidelist>
<a href=https://tesla-ce.github.io/installation/install/swarm/configuration/>
Configuration
</a>
</li>
<li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/services/ title="Deploy Services" class=sidelist>
<a href=https://tesla-ce.github.io/installation/install/swarm/services/>
Deploy Services
</a>
</li>
<li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/initialize/ title=Initialize class="sidelist
active">
<a href=https://tesla-ce.github.io/installation/install/swarm/initialize/>
Initialize
</a>
</li>
<li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/core/ title="Deploy TeSLA CE" class=sidelist>
<a href=https://tesla-ce.github.io/installation/install/swarm/core/>
Deploy TeSLA CE
</a>
</li>
</ul>
</li>
<li data-nav-id=https://tesla-ce.github.io/installation/install/docker-compose/ title=Docker-Compose class=sidelist>
<a href=https://tesla-ce.github.io/installation/install/docker-compose/>
Docker-Compose
</a>
</li>
</ul>
</li>
<li data-nav-id=https://tesla-ce.github.io/installation/configuration/ title=Configuration class=sidelist>
<a href=https://tesla-ce.github.io/installation/configuration/>
Configuration
</a>
</li>
<li data-nav-id=https://tesla-ce.github.io/installation/customization/ title=Customization class=sidelist>
<a href=https://tesla-ce.github.io/installation/customization/>
Customization
</a>
</li>
<li data-nav-id=https://tesla-ce.github.io/installation/elements/ title=Elements class=sidelist>
<a href=https://tesla-ce.github.io/installation/elements/>
Elements
</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class=col-lg-9>
<div class="p-lg-5 p-4 bg-white">
<h2 class=mb-5>Initialize</h2>
<div class=content>
<div class="notices warning"><p>Double check that all <strong>required services</strong> are running and accessible before trying this step.</p></div>
<h2 id=database>Database</h2>
<p>The database must exist before trying to configure TeSLA CE. If root credentials are provided, this process
will create the not privileged user, otherwise, the not privileged should have owner permissions in the TeSLA database.</p>
<h2 id=storage-buckets>Storage Buckets</h2>
<p>If you are using MinIO, the configuration process will create and initialize the buckets if they do not exist. If using
another storage like Amazon S3 or the provided credentials cannot create buckets, they may exist before trying to run the
configuration script.</p>
<p>If the buckets are created by the configuration script, at the end of the configuration process you need to set
the correct policy to the public bucket. This can be done with the MinIO client following those steps:</p>
<ol>
<li>Get the configuration parameters <strong>STORAGE_URL</strong>, <strong>BUCKET_NAME</strong>, <strong>STORAGE_KEY</strong> and <strong>STORAGE_SECRET</strong> from the configuration
file <code>tesla-ce.cfg</code> generated previously (see <a href=../configuration>Configuration</a>
).</li>
</ol>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cfg data-lang=cfg><span style=color:#75715e># Storage configuration (S3 or Minio)</span>
<span style=color:#66d9ef>[storage]</span>
<span style=color:#75715e># Storage url</span>
<span style=color:#75715e># (str) default: http://localhost:9000</span>
<span style=color:#a6e22e>url</span><span style=color:#f92672>=</span><span style=color:#e6db74>STORAGE_URL</span>
<span style=color:#75715e># Storage default public bucket</span>
<span style=color:#75715e># (str) default: tesla-public</span>
<span style=color:#a6e22e>public_bucket_name</span><span style=color:#f92672>=</span><span style=color:#e6db74>BUCKET_NAME</span>
<span style=color:#a6e22e>...</span>
<span style=color:#75715e># Storage access key id</span>
<span style=color:#75715e># (str)</span>
<span style=color:#a6e22e>access_key</span><span style=color:#f92672>=</span><span style=color:#e6db74>STORAGE_KEY</span>
<span style=color:#75715e># Storage secret access key</span>
<span style=color:#75715e># (str)</span>
<span style=color:#a6e22e>secret_key</span><span style=color:#f92672>=</span><span style=color:#e6db74>STORAGE_SECRET</span></code></pre></div>
<ol start=2>
<li>
<p>Run a MinIO client
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker run -it --entrypoint<span style=color:#f92672>=</span>/bin/bash minio/mc</code></pre></div></p>
</li>
<li>
<p>Setup the MinIO connection. If you are not using a real domain, use <code>--insecure</code> option to avoid certificate errors.
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mc alias set minio STORAGE_URL STORAGE_KEY STORAGE_SECRET <span style=color:#f92672>[</span>--insecure<span style=color:#f92672>]</span></code></pre></div></p>
</li>
<li>
<p>Change the policy for the public bucket. If you are not using a real domain, use <code>--insecure</code> option to avoid certificate errors.
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mc policy set download minio/BUCKET_NAME <span style=color:#f92672>[</span>--insecure<span style=color:#f92672>]</span></code></pre></div></p>
</li>
</ol>
<h2 id=initialize-tesla-ce>Initialize TeSLA CE</h2>
<p>Once the configuration options are set on the configuration file, in this step we will prepare all
the services to be used. First check that configuration is valid:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>tesla_ce reconfigure --check</code></pre></div>
<p>And finally apply the configuration:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>tesla_ce reconfigure</code></pre></div>
<p>This command will initialize all the services to be ready for TeSLA CE deployment.</p>
<div class="notices tip"><p>Depending on the services and connection performance, some actions can take longer than default HTTP timeout.
If this happens, the command will fail. Just run this command again to finish the configuration process.</p></div>
</div>
<p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 14 Jun 2021</p>
<nav class="pagination mt-3">
<a class="nav nav-prev" href=https://tesla-ce.github.io/installation/install/swarm/services/ aria-label="Previous page"><i class="ti-arrow-left mr-2"></i> <span class="d-none d-md-block">Deploy Services</span></a>
<a class="nav nav-next" href=https://tesla-ce.github.io/installation/install/swarm/core/ aria-label="Previous page"> <span class="d-none d-md-block">Deploy TeSLA CE</span><i class="ti-arrow-right ml-2"></i></a>
</nav>
</div>
</div>
</div>
</div>
</section>
<footer class="section pb-4">
<div class=container>
<div class="row align-items-center">
<div class="col-md-8 text-md-left text-center">
<p class="mb-md-0 mb-4">Copyright Â© 2021 TeSLA CE</p>
</div>
<div class="col-md-4 text-md-right text-center">
<ul class=list-inline>
<li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://github.com/tesla-ce aria-label=Github><i class=ti-github></i></a></li>
</ul>
</div>
</div>
</div>
</footer>
<script src=https://tesla-ce.github.io/js/script.min.js></script>
<div class=cookie-container>
<p>
We use cookies on this website to give you the best experience on our
site. To find out more, read our <a href=/cookies/>cookie policy</a>.
</p>
<button class=cookie-btn>
Accept
</button>
</div>
<script src=/js/cookie.js></script>
</body>
</html>