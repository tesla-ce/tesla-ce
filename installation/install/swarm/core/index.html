<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Deploy TeSLA CE</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83.1"><meta name=description content="Deploy TeSLA CE - TeSLA CE "><link rel=stylesheet href=https://tesla-ce.github.io/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://tesla-ce.github.io/plugins/themify-icons/themify-icons.css><link rel=icon href=https://tesla-ce.github.io/images/favicon.png type=image/x-icon><link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel=stylesheet><style>:root{--primary-color:#02007e;--body-color:#f9f9f9;--text-color:#636363;--text-color-dark:#242738;--white-color:#ffffff;--light-color:#f8f9fa;--font-family:Lato}</style><link href=https://tesla-ce.github.io/css/style.min.css rel=stylesheet media=screen><script src=https://tesla-ce.github.io/plugins/jquery/jquery-1.12.4.js></script><script src=https://tesla-ce.github.io/plugins/jquery/jquery-ui.js></script><script src=https://tesla-ce.github.io/plugins/bootstrap/bootstrap.min.js></script><script src=https://tesla-ce.github.io/plugins/match-height/jquery.matchHeight-min.js></script><meta property="og:image" content="https://tesla-ce.github.io/images/logo_tesla_ce.png"><meta name=twitter:image content="https://tesla-ce.github.io/images/logo_tesla_ce.png"><meta name=twitter:card content="summary_large_image"><meta property="og:image:width" content="1268"><meta property="og:image:height" content="711"><meta property="og:image:type" content="image/png"><meta name=twitter:title content="Deploy TeSLA CE"><meta name=twitter:description content="If you have deployed the services as part of the TeSLA CE deployment process, you should skip the network creation and load balancer deployment.
 Generate deployment scripts To generate all scripts to deploy the TeSLA CE core on your cluster, run:
tesla_ce deploy_core This command will create a folder deploy with:
 config: Folder with required configuration files secrets: Folder with required secret files tesla_lb.yml: Docker Stack file for the Load Balancer tesla_core."><meta property="og:title" content="Deploy TeSLA CE"><meta property="og:description" content="If you have deployed the services as part of the TeSLA CE deployment process, you should skip the network creation and load balancer deployment.
 Generate deployment scripts To generate all scripts to deploy the TeSLA CE core on your cluster, run:
tesla_ce deploy_core This command will create a folder deploy with:
 config: Folder with required configuration files secrets: Folder with required secret files tesla_lb.yml: Docker Stack file for the Load Balancer tesla_core."><meta property="og:type" content="article"><meta property="og:url" content="https://tesla-ce.github.io/installation/install/swarm/core/"><meta property="article:section" content="installation"><meta property="article:modified_time" content="2021-06-11T20:36:37+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deploy TeSLA CE"><meta name=twitter:description content="If you have deployed the services as part of the TeSLA CE deployment process, you should skip the network creation and load balancer deployment.
 Generate deployment scripts To generate all scripts to deploy the TeSLA CE core on your cluster, run:
tesla_ce deploy_core This command will create a folder deploy with:
 config: Folder with required configuration files secrets: Folder with required secret files tesla_lb.yml: Docker Stack file for the Load Balancer tesla_core."></head><body><header class="shadow-bottom sticky-top bg-white"><nav class="navbar navbar-expand-md navbar-light"><div class=container><a class="navbar-brand px-2" href=/><img class=img-fluid src=https://tesla-ce.github.io/images/logo_tesla_ce.png alt="TeSLA CE"></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation aria-controls=navigation aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse text-center" id=navigation><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-dark" href=https://tesla-ce.github.io/>Home</a></li><li class=nav-item><a class="nav-link text-dark" href=https://tesla-ce.github.io/faq>Faq</a></li><li class=nav-item><a class="nav-link text-dark" href=https://tesla-ce.github.io/contact>contact</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-dark" href=# role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>docs</a><div class=dropdown-menu><a class=dropdown-item href=https://tesla-ce.github.io/features>Features</a>
<a class=dropdown-item href=https://tesla-ce.github.io/installation>Installation</a>
<a class=dropdown-item href=https://tesla-ce.github.io/developers>Developers</a></div></li></ul></div></div></nav></header><section class="single section-sm pb-0"><div class=container><div class=row><div class=col-lg-3><div class=sidebar><a class=back-btn href=/ aria-label=back></a><ul class=list-styled><li data-nav-id=https://tesla-ce.github.io/installation/ title=Installation class=sidelist><a href=https://tesla-ce.github.io/installation/>Installation</a><ul><li data-nav-id=https://tesla-ce.github.io/installation/requirements/ title=Requirements class=sidelist><a href=https://tesla-ce.github.io/installation/requirements/>Requirements</a></li><li data-nav-id=https://tesla-ce.github.io/installation/install/ title=Installation class=sidelist><a href=https://tesla-ce.github.io/installation/install/>Installation</a><ul><li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/ title="Docker Swarm" class=sidelist><a href=https://tesla-ce.github.io/installation/install/swarm/>Docker Swarm</a><ul><li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/requirements/ title=Requirements class=sidelist><a href=https://tesla-ce.github.io/installation/install/swarm/requirements/>Requirements</a></li><li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/getting_started/ title="Getting Started" class=sidelist><a href=https://tesla-ce.github.io/installation/install/swarm/getting_started/>Getting Started</a></li><li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/configuration/ title=Configuration class=sidelist><a href=https://tesla-ce.github.io/installation/install/swarm/configuration/>Configuration</a></li><li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/services/ title="Deploy Services" class=sidelist><a href=https://tesla-ce.github.io/installation/install/swarm/services/>Deploy Services</a></li><li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/initialize/ title=Initialize class=sidelist><a href=https://tesla-ce.github.io/installation/install/swarm/initialize/>Initialize</a></li><li data-nav-id=https://tesla-ce.github.io/installation/install/swarm/core/ title="Deploy TeSLA CE" class="sidelist
active"><a href=https://tesla-ce.github.io/installation/install/swarm/core/>Deploy TeSLA CE</a></li></ul></li><li data-nav-id=https://tesla-ce.github.io/installation/install/docker-compose/ title=Docker-Compose class=sidelist><a href=https://tesla-ce.github.io/installation/install/docker-compose/>Docker-Compose</a></li></ul></li><li data-nav-id=https://tesla-ce.github.io/installation/configuration/ title=Configuration class=sidelist><a href=https://tesla-ce.github.io/installation/configuration/>Configuration</a></li><li data-nav-id=https://tesla-ce.github.io/installation/customization/ title=Customization class=sidelist><a href=https://tesla-ce.github.io/installation/customization/>Customization</a></li><li data-nav-id=https://tesla-ce.github.io/installation/elements/ title=Elements class=sidelist><a href=https://tesla-ce.github.io/installation/elements/>Elements</a></li></ul></li></ul></div></div><div class=col-lg-9><div class="p-lg-5 p-4 bg-white"><h2 class=mb-5>Deploy TeSLA CE</h2><div class=content><div class="notices tip"><p>If you have deployed the services as part of the TeSLA CE deployment process, you should <strong>skip
the network creation and load balancer deployment</strong>.</p></div><h2 id=generate-deployment-scripts>Generate deployment scripts</h2><p>To generate all scripts to deploy the TeSLA CE core on your cluster, run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>tesla_ce deploy_core</code></pre></div><p>This command will create a folder <strong>deploy</strong> with:</p><ul><li><strong>config</strong>: Folder with required configuration files</li><li><strong>secrets</strong>: Folder with required secret files</li><li><strong>tesla_lb.yml</strong>: Docker Stack file for the Load Balancer</li><li><strong>tesla_core.yml</strong>: Docker Stack file to deploy all TeSLA CE core modules</li></ul><h2 id=deploy-tesla-ce-core-services>Deploy TeSLA CE core services</h2><p>Before deploying, move <strong>deploy</strong> folder to a Docker Swarm master node and <strong>move to this folder</strong> of the node machine.</p><h3 id=create-networks>Create networks</h3><p>TeSLA CE will use two different networks, to create them run:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker network create --driver overlay tesla_public
docker network create --driver overlay tesla_private</code></pre></div><h3 id=deploy-the-load-balancer>Deploy the load balancer</h3><p>Traefik is used as a default load balancer and certificate management. We need to create a persistence folder for traefik.
All data folders are expected under the folder provided in the <strong>deployment_data_path</strong> configuration option (see <a href=../configuration>Configuration</a>).
By default, this folder is <code>/var/tesla</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo mkdir -p /var/tesla/traefik</code></pre></div><p>Now we are ready to deploy the load balancer service:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker stack deploy -c tesla_lb.yml tesla</code></pre></div><p>You can check the deployment progress with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>watch docker service ls</code></pre></div><h3 id=deploy-services-to-docker-swarm-cluster>Deploy services to Docker Swarm cluster</h3><p>Once Traefik service is up, we can deploy the rest of the services:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker stack deploy -c tesla_core.yml tesla</code></pre></div></div><p class="post-meta border-bottom pb-3 mb-0 mt-3">Updated on 11 Jun 2021</p><nav class="pagination mt-3"><a class="nav nav-prev" href=https://tesla-ce.github.io/installation/install/swarm/initialize/ aria-label="Previous page"><i class="ti-arrow-left mr-2"></i> <span class="d-none d-md-block">Initialize</span></a>
<a class="nav nav-next" href=https://tesla-ce.github.io/installation/install/docker-compose/ aria-label="Previous page"><span class="d-none d-md-block">Docker-Compose</span><i class="ti-arrow-right ml-2"></i></a></nav></div></div></div></div></section><footer class="section pb-4"><div class=container><div class="row align-items-center"><div class="col-md-8 text-md-left text-center"><p class="mb-md-0 mb-4">Copyright © 2021 TeSLA CE</p></div><div class="col-md-4 text-md-right text-center"><ul class=list-inline><li class=list-inline-item><a class="text-color d-inline-block p-2" href=https://github.com/tesla-ce aria-label=Github><i class=ti-github></i></a></li></ul></div></div></div></footer><script src=https://tesla-ce.github.io/js/script.min.js></script></body></html>